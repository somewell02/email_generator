# Email generator

## Project setup
```
yarn install
```

### Compiles and hot-reloads for development
```
yarn dev
```

### Compiles and minifies for production
```
yarn build
```

### Lints and fixes files
```
yarn lint
```

# Структура JSON файла письма
Генерируемое письмо состоит из заголовка, тела письма, и подвала (контактная информация ссылка на отмену рассылки). Заголовок и подвал не настраиваемые блоки.

Тело письма может состоять из блоков. Доступные блоки для генерации письма

| Название блока        | Значение параметра type |
|-----------------------|-------------------------|
| Заголовок на подложке | text_on_background      |
| Заголовок в абзаце    | paragraph_header        |
| Кнопка                | button                  |

# Настройка письма

| Название параметра в JSON файле  | Описание                                                                   |
|----------------------------------|----------------------------------------------------------------------------|
| subject                          | Тема письма                                                                |
| parameters                       | Массив блоков письма, письмо формируется<br/>от первого блока к последнему |

Настройка блоков письма. Каждый блок имеет обязательный параметр type который определяет какой блок необходимо сформировать. Доступные значения параметра type приведены выше.

В письмо можно передать данные о пользователе. Для этого при вызове функции отправки письма необходимо добавить ключ к строке **user_id**. По user_id будет найден контрагент к которому он привязан.

Для вывода пользователя и контрагента нужно использовать теги #user (вывод в формате Фамилия Имя) и #contractor. Данные теги можно добавить в заголовок абзаца и абзац. 

Теги добавляются в параметр **text**

| Название тега  | Описание                                                                   |
|----------------------------------|----------------------------------------------------------------------------|
| #user                            | Данный параметр необходимо добавить в атрибут text в то место где необходимо вывести пользователя|
| #contactor                       | Данный параметр необходимо добавить в атрибут text в то место где необходимо вывести контрагента |



Каждый блок имеет дополнительные поля для кастомизациии
## text_on_background
| Название параметра | Описание                                                                                                 | Допустимое значение          |
|--------------------|----------------------------------------------------------------------------------------------------------|------------------------------|
| text	              | Текст который будет выведен на подложке. Для принудительного переноса текста можно использовать тег "br" | string                       |
| is_boldest         | Определяет выделять ли текст жирным.                                                                     | boolean (по умолчанию false) |

## paragraph_header
| Название параметра | Описание 	                                                                                                | Допустимое значение           |
|--------------------|-----------------------------------------------------------------------------------------------------------|-------------------------------|
| text               | Текст который будет выведен на подложке. Для принудительного переноса текста можно использовать тег "br"  | string                        |
| is_boldest         | Определяет выделять ли текст жирным.                                                                      | boolean (по умолчанию false)  |


## paragraph
| Название параметра | Описание                                                                                             | Допустимое значение |
|--------------------|------------------------------------------------------------------------------------------------------|---------------------|
| text	              | Текст который будет выведен на подложке. Для принудительного переноса текста можно использовать <br> | string              |
| links              | Массив с настройками для выделения ссылки в абзаце                                                   | array               |
| links[‘text’]      | Текст который будет превращён в ссылку. Поиск ведется в text параметре абзаца.                       | string              |
| links[‘href]       | Адрес куда будет вести ссылка                                                                        | url                 |
| boldeable          | Массив куда передаётся текст который необходимо выделить жирным в абзаце                             | array(string)       |
| align              | Выравнивание текста                                                                                  | left center right   |

## button
| Название параметра    | Описание	                                                                                            | Допустимое значение  |
|-----------------------|------------------------------------------------------------------------------------------------------|----------------------|
| text	                 | Текст который будет выведен на подложке. Для принудительного переноса текста можно использовать <br> | string               |
| action                | Адрес куда будет вести нажатие на кнопку                                                             | url                  |


### Пример файла письма со всем доступными блоками

    {
    "mail": {
        "subject": "Тема письма",
        "parameters": [
            {
                "type": "text_on_background",
                "text": "Your quarterly Update",
                "is_boldest": false
            },
            {
                "type": "paragraph_header",
                "text": "H2",
                "is_boldest": false
            },
            {
                "type": "paragraph",
                "text": "Спонсорство спорадически притягивает инструмент маркетинга. Продуктовый ассортимент синхронизирует отраслевой стандарт, опираясь на опыт западных коллег. Диктат потребителя искажает охват аудитории."
            },
            {
                "type": "paragraph",
                "text": "Интересно отметить, что интеграция регулярно усиливает метод изучения рынка. Медиабизнес стабилизирует продуктовый ассортимент. Позиционирование на рынке изменяет медиавес, повышая конкуренцию.",
                "links": [
                    {
                        "text": "метод изучения рынка",
                        "href": "#"
                    }
                ]
            },
            {
                "type": "paragraph",
                "text": "Вход в интерфейс: http://pm.chtp.net",
                "links": [
                    {
                        "text": "http://pm.chtp.net",
                        "href": "http://pm.chtp.net"
                    }
                ],
                "boldeable": [
                    "Вход в интерфейс:"
                ]
            },
            {
                "type": "paragraph",
                "text": "В соответствии с законом Ципфа, управление брендом трансформирует ролевой рекламный бриф. Опросная анкета синхронизирует баинг и селлинг, оптимизируя бюджеты. Изменение глобальной стратегии поразительно. Позиционирование на рынке концентрирует креативный медиамикс"
            },
            {
                "type": "button",
                "text": "Подтвердить почту",
                "action": "#"
            },
            {
                "type": "paragraph",
                "text": "Если у вас есть вопросы о том, как начать работу, напишите нам на адрес help@chtp.net",
                "align": "center",
                "links": [
                    {
                        "text": "help@chtp.net",
                        "href": "help@chtp.net"
                    }
                ]
            }
        ]
    }



